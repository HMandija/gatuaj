{
  "version": 3,
  "sources": ["../../../../gatuaj/netlify/functions/paypal-capture-order.js"],
  "sourceRoot": "C:/Users/User/AppData/Local/Temp/tmp-14136-ENh4M3YV65DU",
  "sourcesContent": ["const base =\r\n  process.env.PAYPAL_ENV === \"live\"\r\n    ? \"https://api-m.paypal.com\"\r\n    : \"https://api-m.sandbox.paypal.com\";\r\n\r\nasync function getAccessToken() {\r\n  const client = process.env.VITE_PAYPAL_CLIENT_ID;\r\n  const secret = process.env.PAYPAL_CLIENT_SECRET;\r\n\r\n  const auth = Buffer.from(`${client}:${secret}`).toString(\"base64\");\r\n\r\n  const res = await fetch(`${base}/v1/oauth2/token`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Authorization: `Basic ${auth}`,\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    body: \"grant_type=client_credentials\",\r\n  });\r\n\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data?.error_description || \"PayPal token error\");\r\n  return data.access_token;\r\n}\r\n\r\nexport const handler = async (event) => {\r\n  try {\r\n    const { paypalOrderId } = JSON.parse(event.body || \"{}\");\r\n    if (!paypalOrderId) throw new Error(\"Missing paypalOrderId\");\r\n\r\n    const accessToken = await getAccessToken();\r\n\r\n    const res = await fetch(\r\n      `${base}/v2/checkout/orders/${paypalOrderId}/capture`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${accessToken}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) throw new Error(data?.message || \"PayPal capture error\");\r\n\r\n    return { statusCode: 200, body: JSON.stringify(data) };\r\n  } catch (e) {\r\n    return { statusCode: 400, body: JSON.stringify({ error: e.message }) };\r\n  }\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAM,OACJ,QAAQ,IAAI,eAAe,SACvB,6BACA;AAEN,eAAe,iBAAiB;AAC9B,QAAM,SAAS,QAAQ,IAAI;AAC3B,QAAM,SAAS,QAAQ,IAAI;AAE3B,QAAM,OAAO,OAAO,KAAK,GAAG,MAAM,IAAI,MAAM,EAAE,EAAE,SAAS,QAAQ;AAEjE,QAAM,MAAM,MAAM,MAAM,GAAG,IAAI,oBAAoB;AAAA,IACjD,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,eAAe,SAAS,IAAI;AAAA,MAC5B,gBAAgB;AAAA,IAClB;AAAA,IACA,MAAM;AAAA,EACR,CAAC;AAED,QAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,MAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,qBAAqB,oBAAoB;AAC5E,SAAO,KAAK;AACd;AAEO,IAAM,UAAU,OAAO,UAAU;AACtC,MAAI;AACF,UAAM,EAAE,cAAc,IAAI,KAAK,MAAM,MAAM,QAAQ,IAAI;AACvD,QAAI,CAAC,cAAe,OAAM,IAAI,MAAM,uBAAuB;AAE3D,UAAM,cAAc,MAAM,eAAe;AAEzC,UAAM,MAAM,MAAM;AAAA,MAChB,GAAG,IAAI,uBAAuB,aAAa;AAAA,MAC3C;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,eAAe,UAAU,WAAW;AAAA,UACpC,gBAAgB;AAAA,QAClB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,QAAI,CAAC,IAAI,GAAI,OAAM,IAAI,MAAM,MAAM,WAAW,sBAAsB;AAEpE,WAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,IAAI,EAAE;AAAA,EACvD,SAAS,GAAG;AACV,WAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,EAAE,OAAO,EAAE,QAAQ,CAAC,EAAE;AAAA,EACvE;AACF;",
  "names": []
}
